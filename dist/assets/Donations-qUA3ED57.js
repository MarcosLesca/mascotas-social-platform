import{j as e,d as F,b as O}from"./index-Bgi_J57O.js";import{r as n}from"./vendor-react-B0FCftpX.js";import{I as $,S as _}from"./ImageViewer-DHancq9z.js";import"./vendor-supabase-CEYArTBl.js";function H(t){return t.replace(/\D/g,"")}function U(t){const d=H(t);return d.startsWith("54")?"54"+d.slice(2):d.startsWith("0")?"54"+d.slice(1):(d.length===11,"54"+d)}const V=({campaign:t,isOpen:d,onClose:g,variant:c="modal"})=>{const[b,y]=n.useState(!1);if(!d||!t)return null;const v=U(t.whatsappNumber||""),f=!!t.whatsappNumber,u=!!t.contactEmail,N=`Hola! Vi la donación "${t.title}" para ${t.petName} y me gustaría ayudar.`,p=f?`https://wa.me/${v}?text=${encodeURIComponent(N)}`:null,j=u?`mailto:${t.contactEmail}?subject=${encodeURIComponent(`Ayuda para ${t.petName}`)}&body=${encodeURIComponent(N)}`:null,x=c==="fullscreen",l=x?"fixed inset-0 z-50 bg-white dark:bg-background-dark overflow-y-auto":"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",C=x?"w-full min-h-screen bg-white dark:bg-background-dark":"bg-white dark:bg-background-dark rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-hidden shadow-2xl",o={medical:"Médica",food:"Alimento",shelter:"Refugio",spay_neuter:"Esterilización",emergency:"Emergencia",other:"Otro",infrastructure:"Infraestructura"}[t.type]||t.type;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:l,onClick:x?void 0:g,children:e.jsxs("div",{className:C,onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"relative h-56 sm:h-72 overflow-hidden bg-black cursor-zoom-in group",onClick:()=>y(!0),children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-contain bg-black"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/10 backdrop-blur-[1px]",children:e.jsx("div",{className:"bg-black/30 p-4 rounded-full backdrop-blur-md border border-white/20 shadow-xl transform scale-75 group-hover:scale-100 transition-transform duration-200",children:e.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"zoom_in"})})}),e.jsxs("button",{onClick:k=>{k.stopPropagation(),g()},className:`absolute top-4 ${x?"left-4":"right-4"} z-10 px-4 py-2 bg-white/90 hover:bg-white text-slate-900 rounded-full text-sm font-black transition-all shadow-lg flex items-center gap-2`,children:[x&&e.jsx("span",{className:"material-symbols-outlined text-lg",children:"arrow_back"}),x?"Volver":"Cerrar"]}),e.jsxs("div",{className:"absolute bottom-6 left-6 flex gap-3 flex-wrap pointer-events-none",children:[t.urgency&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-black uppercase tracking-wider px-3 py-1 rounded-full",children:"Urgente"}),e.jsx("span",{className:"bg-sky-500 text-white text-xs font-black uppercase tracking-wider px-3 py-1 rounded-full",children:"Donación solidaria"}),e.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-xs font-black px-3 py-1 rounded-full uppercase",children:o})]})]}),e.jsxs("div",{className:"p-6 sm:p-8 max-w-4xl mx-auto pb-40 md:pb-32 lg:pb-28",children:[e.jsx("h2",{className:"text-2xl font-black mb-6",children:t.title}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-3",children:"Descripción:"}),e.jsx("p",{className:"text-black leading-relaxed",children:t.description})]}),e.jsxs("div",{className:"bg-white dark:bg-white/5 rounded-2xl p-6 border border-sky-500/10 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"material-symbols-outlined text-2xl text-sky-500",children:"account_balance"}),e.jsx("h3",{className:"text-xl font-bold text-black",children:"Datos Bancarios"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"CBU / CVU"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono text-sm text-black break-all",children:t.cbu}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.cbu),className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors text-gray-600",title:"Copiar CBU",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:"content_copy"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Alias"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl font-mono text-sm text-black",children:t.alias}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.alias),className:"p-3 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors text-gray-600",title:"Copiar Alias",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:"content_copy"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"Titular de la Cuenta"}),e.jsx("div",{className:"px-4 py-3 bg-gray-50 border border-gray-100 rounded-xl text-black font-medium",children:t.accountHolder})]})]})]}),(f||u||t.contactInfo)&&e.jsxs("div",{className:"bg-sky-500/5 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Información de Contacto"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold",children:"Responsable:"}),e.jsx("span",{className:"font-medium",children:t.responsibleName})]}),t.contactInfo&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold",children:"Contacto:"}),e.jsx("span",{className:"font-medium",children:t.contactInfo})]}),f&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold",children:"WhatsApp:"}),p?e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-black hover:text-sky-500 transition-colors",children:t.whatsappNumber}):e.jsx("span",{className:"font-medium",children:t.whatsappNumber})]}),u&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-bold",children:"Email:"}),j?e.jsx("a",{href:j,className:"font-medium text-black hover:text-sky-500 transition-colors",children:t.contactEmail}):e.jsx("span",{className:"font-medium",children:t.contactEmail})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary/10 to-accent-teal/10 rounded-2xl p-6 border border-primary/10 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 font-bold mb-1 uppercase tracking-wider",children:"Meta a recaudar"}),e.jsxs("p",{className:"text-3xl font-black text-green-700 mb-2",children:["$",t.goal.toLocaleString("es-AR")]}),e.jsxs("p",{className:"text-lg text-black/60 font-medium",children:["Tu aporte hace la diferencia para ",t.petName]})]}),e.jsxs("div",{className:"space-y-3",children:[p&&e.jsxs("button",{onClick:()=>window.open(p,"_blank"),className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 rounded-2xl flex items-center justify-center gap-3 transition-all shadow-lg hover:shadow-xl hover:scale-[1.02]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:e.jsx("path",{d:"M12.04 2C6.58 2 2.13 6.45 2.13 11.9c0 1.92.5 3.8 1.45 5.45L2 22l4.82-1.56a9.83 9.83 0 0 0 5.22 1.5h.01c5.46 0 9.9-4.45 9.9-9.9C21.95 6.45 17.5 2 12.04 2zm5.73 14.16c-.24.67-1.18 1.29-1.97 1.46-.54.11-1.24.2-3.6-.78-3.02-1.25-4.97-4.32-5.12-4.52-.14-.2-1.23-1.64-1.23-3.14 0-1.5.78-2.24 1.06-2.54.28-.3.61-.38.81-.38h.58c.18 0 .43-.07.67.51.24.58.81 2 .88 2.15.07.15.12.32.02.52-.1.2-.15.32-.3.49-.15.17-.32.38-.46.51-.15.15-.31.31-.13.61.18.3.79 1.31 1.7 2.12 1.17 1.04 2.15 1.37 2.46 1.52.31.15.49.13.67-.08.18-.2.77-.9.98-1.21.2-.3.41-.25.68-.15.28.1 1.75.83 2.05.98.3.15.5.22.58.34.07.12.07.69-.17 1.36z"})}),"Contactar por WhatsApp"]}),j&&e.jsxs("a",{href:j,className:"w-full bg-white dark:bg-white/5 border-2 border-sky-500 hover:border-sky-600 text-sky-500 hover:text-sky-600 font-bold py-4 rounded-2xl flex items-center justify-center gap-3 transition-all hover:bg-sky-500/5",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"mail"}),"Enviar Email"]})]}),e.jsxs("div",{className:"bg-white dark:bg-white/5 rounded-2xl p-6 border border-sky-500/10",children:[e.jsx("h4",{className:"font-bold mb-4 text-lg",children:"Detalles de la donación"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-sm text-black/70",children:"Mascota:"}),e.jsx("span",{className:"text-sm font-bold text-black",children:t.petName})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-sm text-black/70",children:"Tipo de Ayuda:"}),e.jsx("span",{className:"text-sm font-bold text-black",children:o})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-white/5",children:[e.jsx("span",{className:"text-sm text-black/70",children:"Fecha Límite:"}),e.jsx("span",{className:"text-sm font-bold text-urgent-red",children:t.deadline})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-black/70",children:"Responsable:"}),e.jsx("span",{className:"text-sm font-bold text-black",children:t.responsibleName})]})]})]})]})]})]})]})}),e.jsx($,{isOpen:b,onClose:()=>y(!1),src:t.image,alt:t.title})]})},B="image/jpeg,image/png,image/webp",R=5,W=({isOpen:t,onClose:d,onSubmit:g,onError:c})=>{const b=n.useRef(null),[y,v]=n.useState(!1),[f,u]=n.useState(null),[N,p]=n.useState(null),[j,x]=n.useState(null),[l,C]=n.useState({title:"",description:"",goal:"",urgency:!1,type:"medical",petName:"",cbu:"",alias:"",accountHolder:"",responsibleName:"",whatsappNumber:"",contactEmail:"",deadline:""}),o=(a,r)=>{C(m=>({...m,[a]:r})),u(null)},k=a=>{var S;const r=(S=a.target.files)==null?void 0:S[0];if(!r)return;if(!r.type.match(/^image\/(jpeg|png|webp)$/i)){c==null||c("Solo se permiten imágenes JPEG, PNG o WebP.");return}if(r.size>R*1024*1024){c==null||c(`La imagen no puede superar ${R} MB.`);return}p(r);const m=new FileReader;m.onload=()=>x(m.result),m.readAsDataURL(r)},A=()=>{p(null),x(null),b.current&&(b.current.value="")},M=async a=>{if(a.preventDefault(),!N){u("Debes subir una imagen de la donación.");return}const r=Number(l.goal);if(!Number.isFinite(r)||r<=0){u("La meta debe ser un número mayor a 0.");return}v(!0),u(null);const{error:m}=await F({title:l.title,description:l.description,goal:r,urgency:l.urgency,type:l.type,petName:l.petName,cbu:l.cbu,alias:l.alias,accountHolder:l.accountHolder,responsibleName:l.responsibleName,whatsappNumber:l.whatsappNumber,contactEmail:l.contactEmail,deadline:l.deadline,imageFile:N});if(v(!1),m){u(m.message),c==null||c(m.message);return}g==null||g(),d()},w=a=>{a.key!=="Enter"||a.target.tagName==="TEXTAREA"||a.preventDefault()};return n.useEffect(()=>{t||(C({title:"",description:"",goal:"",urgency:!1,type:"medical",petName:"",cbu:"",alias:"",accountHolder:"",responsibleName:"",whatsappNumber:"",contactEmail:"",deadline:""}),p(null),x(null),u(null),b.current&&(b.current.value=""))},[t]),t?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-1 sm:p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-background-dark rounded-2xl sm:rounded-3xl max-w-3xl w-full max-h-[95vh] sm:max-h-[90vh] overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-sky-500 text-white p-4 sm:p-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg sm:text-2xl font-black",children:"Publicar Donación"}),e.jsx("button",{onClick:d,className:"px-2 sm:px-3 py-1 bg-white/20 hover:bg-white/40 rounded-full text-xs sm:text-sm font-bold transition-colors",children:"Cerrar"})]}),e.jsxs("form",{onSubmit:M,onKeyDown:w,className:"p-4 sm:p-6 max-h-[80vh] sm:max-h-[75vh] overflow-y-auto space-y-4 sm:space-y-5 mb-8 sm:mb-4",children:[f&&e.jsx("div",{role:"alert",className:"rounded-xl border border-urgent-red/30 bg-urgent-red/10 px-4 py-3 text-sm text-urgent-red",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Imagen de la donación *"}),e.jsx("input",{ref:b,type:"file",accept:B,onChange:k,className:"hidden","aria-label":"Subir imagen de donación"}),j?e.jsxs("div",{className:"relative inline-block",children:[e.jsx("img",{src:j,alt:"Vista previa",className:"w-44 h-44 object-cover rounded-xl border-2 border-sky-500/20"}),e.jsx("button",{type:"button",onClick:A,className:"absolute -top-2 -right-2 px-2 py-1 bg-urgent-red text-white rounded-full hover:bg-urgent-red/90 text-xs font-bold",children:"X"})]}):e.jsx("button",{type:"button",onClick:()=>{var a;return(a=b.current)==null?void 0:a.click()},className:"flex items-center justify-center w-44 h-44 rounded-xl border-2 border-dashed border-sky-500/30 hover:border-sky-500 hover:bg-sky-500/5 transition-colors text-sm font-bold text-gray-900",children:"Subir imagen"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-900",children:["JPEG, PNG o WebP. Max. ",R," MB."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Titulo *"}),e.jsx("input",{type:"text",required:!0,value:l.title,onChange:a=>o("title",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",placeholder:"Ej: Cirugía para Max"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Mascota *"}),e.jsx("input",{type:"text",required:!0,value:l.petName,onChange:a=>o("petName",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",placeholder:"Ej: Max"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Meta (ARS) *"}),e.jsx("input",{type:"number",min:"1",step:"1",required:!0,value:l.goal,onChange:a=>o("goal",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",placeholder:"Ej: 200000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Tipo *"}),e.jsxs("select",{value:l.type,onChange:a=>o("type",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"medical",children:"Médica"}),e.jsx("option",{value:"food",children:"Alimento"}),e.jsx("option",{value:"shelter",children:"Refugio"}),e.jsx("option",{value:"spay_neuter",children:"Esterilización"}),e.jsx("option",{value:"emergency",children:"Emergencia"}),e.jsx("option",{value:"other",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Fecha límite *"}),e.jsx("input",{type:"date",required:!0,min:new Date(Date.now()+864e5).toISOString().split("T")[0],value:l.deadline,onChange:a=>o("deadline",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Descripcion *"}),e.jsx("textarea",{required:!0,value:l.description,onChange:a=>o("description",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",rows:3,placeholder:"Explica para qué es la donación."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"CBU *"}),e.jsx("input",{type:"text",required:!0,value:l.cbu,onChange:a=>o("cbu",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Alias *"}),e.jsx("input",{type:"text",required:!0,value:l.alias,onChange:a=>o("alias",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Titular *"}),e.jsx("input",{type:"text",required:!0,value:l.accountHolder,onChange:a=>o("accountHolder",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Responsable *"}),e.jsx("input",{type:"text",required:!0,value:l.responsibleName,onChange:a=>o("responsibleName",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"WhatsApp *"}),e.jsx("input",{type:"text",required:!0,value:l.whatsappNumber,onChange:a=>o("whatsappNumber",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",placeholder:"Ej: +54 9 11 1234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:l.contactEmail,onChange:a=>o("contactEmail",a.target.value),className:"w-full px-4 py-3 rounded-xl border border-sky-500/20 bg-white dark:bg-white/5 focus:ring-2 focus:ring-sky-500",placeholder:"Ej: contacto@ejemplo.com"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.urgency,onChange:a=>o("urgency",a.target.checked),className:"rounded text-sky-500 focus:ring-sky-500 border-sky-500/20"}),e.jsx("span",{className:"text-sm font-medium",children:"Marcar como urgente"})]}),e.jsxs("div",{className:"flex justify-end gap-2 sm:gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl border border-sky-500/20 text-gray-900 font-bold hover:bg-sky-500/10 transition-colors text-sm",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:y,className:"px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl bg-sky-500 text-white font-bold hover:bg-sky-600 transition-colors disabled:opacity-50 text-sm",children:y?"Enviando...":"Enviar"})]})]})]})}):null},Z=({onToast:t})=>{const[d,g]=n.useState(null),[c,b]=n.useState(!1),[y,v]=n.useState([]),[f,u]=n.useState(!0),[N,p]=n.useState(null),[j,x]=n.useState(!1),[l,C]=n.useState(null),[o,k]=n.useState(!1),[A,M]=n.useState(!1),[w,a]=n.useState(null),[r,m]=n.useState({type:[],urgency:!1,searchTerm:""}),S=n.useRef(!1),T=()=>{let s=!1;return u(!0),O().then(({data:i,error:h})=>{if(!s){if(u(!1),h){p(h.message);return}v(i)}}),()=>{s=!0}};n.useEffect(()=>T(),[]),n.useEffect(()=>{const s=i=>{if(S.current){S.current=!1;return}c&&(b(!1),g(null),i.preventDefault(),window.history.pushState(null,"","/donations"))};return window.addEventListener("popstate",s),()=>{window.removeEventListener("popstate",s)}},[c]),n.useEffect(()=>{c&&window.history.pushState({modal:!0},"","/donations")},[c]);const E=n.useMemo(()=>{let s=y;if(r.searchTerm){const i=r.searchTerm.toLowerCase();s=s.filter(h=>h.title.toLowerCase().includes(i)||h.description.toLowerCase().includes(i)||h.petName.toLowerCase().includes(i))}return r.type.length>0&&(s=s.filter(i=>r.type.includes(i.type))),r.urgency&&(s=s.filter(i=>i.urgency)),s},[y,r]),D=()=>{m({type:[],urgency:!1,searchTerm:""})},I=r.type.length>0||r.urgency||!!r.searchTerm,z=s=>{g(s),b(!0)},L=()=>{S.current=!0,b(!1),g(null),window.history.state&&window.history.state.modal&&window.history.back()},P=s=>{m(i=>({...i,type:i.type.includes(s)?i.type.filter(h=>h!==s):[...i.type,s]}))};return e.jsxs("div",{className:"w-full max-w-[1500px] mx-auto px-4 sm:px-6 lg:px-10 xl:px-14 pb-6 sm:pb-10 flex flex-col gap-6 sm:gap-8 lg:gap-10",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mt-4 sm:mt-6 px-2",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-2 text-black",children:"Cuando ayudás, ellos sienten esperanza"}),e.jsx("p",{className:"text-gray-800 text-base sm:text-lg",children:"Donaciones"})]}),e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-3xl p-4 sm:p-5 border border-red-200 dark:border-red-800",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-3 sm:gap-4 text-center sm:text-left",children:[e.jsx("div",{className:"size-10 sm:size-12 bg-red-100 dark:bg-red-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-red-500",children:"warning"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-black mb-2 text-red-600 dark:text-red-400",children:"IMPORTANTE"}),e.jsxs("p",{className:"text-sm sm:text-base text-black leading-relaxed",children:["En Mascotas SJ"," ",e.jsx("strong",{className:"text-red-500",children:"no administramos el dinero"})," ","de las donaciones. Solo publicamos las necesidades y proporcionamos toda la información necesaria para que puedas doar directamente a los responsables de las mascotas."]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4 sm:gap-6 lg:gap-8",children:[e.jsxs("aside",{className:"col-span-1 xl:col-span-3",children:[e.jsxs("button",{onClick:()=>k(!o),className:"xl:hidden w-full bg-white dark:bg-white/5 p-4 rounded-2xl border border-sky-500/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold",children:"Filtros"}),e.jsx("span",{className:"material-symbols-outlined",children:o?"expand_less":"expand_more"})]}),e.jsxs("div",{className:`bg-white dark:bg-white/5 p-4 sm:p-6 lg:p-8 rounded-2xl sm:rounded-3xl border border-sky-500/10 xl:sticky xl:top-24 ${o?"block":"hidden"} xl:block`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 sm:mb-8",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Filtros"}),I&&e.jsx("button",{onClick:D,className:"text-[11px] sm:text-xs font-bold text-sky-500 hover:underline",children:"LIMPIAR"})]}),e.jsx("div",{className:"mb-6 sm:mb-8",children:e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",placeholder:"Buscar...",className:"w-full px-4 py-2.5 sm:py-3 bg-white dark:bg-white/10 border border-sky-500/20 rounded-xl focus:ring-2 focus:ring-sky-500 text-sm",value:r.searchTerm,onChange:s=>m({...r,searchTerm:s.target.value})})})}),e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-gray-800 uppercase tracking-widest mb-4",children:"Tipo"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Médica","Alimento","Refugio","Esterilización","Emergencia","Otro"].map(s=>{const h={Médica:"medical",Alimento:"food",Refugio:"shelter",Esterilización:"spay_neuter",Emergencia:"emergency",Otro:"other"}[s],q=r.type.includes(h);return e.jsx("button",{onClick:()=>P(h),className:`px-4 py-2 rounded-full text-xs font-bold transition-all ${q?"bg-sky-500 text-white":"bg-sky-500/5 text-gray-800 hover:bg-sky-500/10"}`,children:s},s)})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-black text-gray-800 uppercase tracking-widest mb-4",children:"Urgencia"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:r.urgency,onChange:s=>m({...r,urgency:s.target.checked}),className:"rounded text-sky-500 focus:ring-sky-500 border-sky-500/20"}),e.jsx("span",{className:"text-sm font-medium group-hover:text-sky-500 transition-colors",children:"Mostrar solo urgentes"})]})]})]}),e.jsxs("button",{className:"w-full mt-8 sm:mt-10 bg-sky-500 text-white py-3.5 sm:py-4 rounded-2xl font-black shadow-lg shadow-sky-500/20 hover:scale-[1.02] transition-all",children:[E.length," Donaciones"]})]})]}),e.jsxs("div",{className:"col-span-1 xl:col-span-9",children:[l&&e.jsx("div",{className:"mb-6 rounded-2xl border border-primary/30 bg-primary/10 p-4 text-accent-teal",children:l}),N&&e.jsx("div",{role:"alert",className:"mb-6 rounded-2xl border border-urgent-red/30 bg-urgent-red/10 p-4 text-urgent-red",children:N}),f?e.jsx("div",{className:"flex flex-col items-center justify-center py-16 sm:py-20 gap-4",children:e.jsx("p",{className:"text-gray-800 text-sm sm:text-base font-medium",children:"Cargando donaciones..."})}):e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-8",children:[e.jsxs("div",{className:"col-span-2 sm:col-span-1 bg-sky-500/5 dark:bg-sky-500/10 border-4 border-dashed border-sky-500/20 rounded-2xl flex flex-col items-center justify-center p-4 sm:p-8 text-center group cursor-pointer hover:bg-sky-500/10 transition-all min-h-[180px] sm:min-h-[380px]",onClick:()=>x(!0),children:[e.jsx("h3",{className:"text-sm sm:text-xl font-bold mb-2 sm:mb-3 text-gray-800",children:"¿Necesitás ayuda para una mascota?"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-900 mb-4 sm:mb-8 max-w-[180px] sm:max-w-[220px]",children:"Creá una publicación y permití que la comunidad colabore."}),e.jsx("button",{className:"bg-sky-500 text-white w-full md:w-auto px-4 sm:px-10 py-2 sm:py-3 rounded-lg sm:rounded-xl font-black shadow-lg hover:shadow-sky-500/30 transition-all text-xs sm:text-base",onClick:s=>{s.stopPropagation(),x(!0)},children:"COMENZAR"})]}),E.map(s=>e.jsxs("div",{onClick:()=>z(s),className:"group h-full bg-white dark:bg-white/5 rounded-2xl overflow-hidden shadow-sm border border-sky-500/10 hover:shadow-xl transition-all duration-300 card-hover flex flex-col",children:[e.jsxs("div",{className:"relative aspect-[4/3] sm:aspect-square overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 flex gap-1.5 sm:gap-2",children:s.urgency&&e.jsx("span",{className:"bg-red-500 text-white text-[9px] sm:text-[10px] font-bold px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full uppercase tracking-wider shadow-lg",children:"URGENTE"})}),e.jsx("div",{className:"absolute bottom-2 sm:bottom-3 right-2 sm:right-3",children:e.jsx("button",{type:"button",onClick:i=>{i.stopPropagation(),a(s),M(!0)},className:"px-2.5 sm:px-3 py-1 rounded-full text-[11px] sm:text-xs font-bold hover:opacity-90 transition-opacity",style:{backgroundColor:"#203553",color:"#ecdbbd"},children:"Compartir"})})]}),e.jsxs("div",{className:"p-3 sm:p-5 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-sm sm:text-xl leading-tight font-bold group-hover:text-sky-500 transition-colors mb-1 sm:mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 font-semibold uppercase tracking-wide truncate mb-2 sm:mb-3",children:s.type==="medical"?"Médica":s.type==="food"?"Alimento":s.type==="shelter"?"Refugio":"Campaña"}),e.jsx("p",{className:"text-xs sm:text-sm text-black mb-2 sm:mb-4 line-clamp-2 leading-relaxed",children:s.description}),e.jsxs("div",{className:"mt-auto space-y-2 sm:space-y-3",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg sm:rounded-xl p-2 sm:p-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm font-bold text-green-700 dark:text-green-400",children:"Meta"}),e.jsxs("span",{className:"text-xs sm:text-sm font-black text-green-600 dark:text-green-400",children:["$",s.goal.toLocaleString("es-AR")]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-red-500 font-semibold",children:[e.jsx("span",{className:"material-symbols-outlined text-xs sm:text-base",children:"event"}),e.jsxs("span",{children:["Hasta: ",s.deadline]})]}),e.jsx("button",{className:"w-full bg-sky-500 hover:bg-sky-600 text-white text-xs sm:text-sm font-bold py-2 sm:py-3 rounded-full transition-all flex items-center justify-center gap-2",children:"Ver detalles"})]})]})]},s.id))]}),!f&&I&&E.length===0&&e.jsxs("div",{className:"bg-white dark:bg-white/5 rounded-2xl sm:rounded-3xl border border-sky-500/5 p-6 sm:p-10 lg:p-12 text-center mt-6 sm:mt-8",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:"No encontramos resultados"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-800 mb-6",children:"Intenta ajustar los filtros o el término de búsqueda"}),e.jsx("button",{onClick:D,className:"bg-sky-500 text-white w-full sm:w-auto px-8 py-3 rounded-xl font-bold hover:opacity-90 transition-all",children:"Limpiar filtros"})]}),!f&&!I&&E.length===0&&y.length===0&&e.jsxs("div",{className:"bg-white dark:bg-white/5 rounded-2xl sm:rounded-3xl border border-sky-500/5 p-6 sm:p-10 lg:p-12 text-center mt-6 sm:mt-8",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Aún no hay casos publicados"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-800",children:"Sé el primero en crear una publicación."})]})]})]}),e.jsx(V,{campaign:d,isOpen:c,onClose:L,variant:"fullscreen"}),e.jsx(W,{isOpen:j,onClose:()=>x(!1),onSubmit:()=>{t(`Tu publicación fue enviada correctamente.

Será revisada por LyM desarrollo web antes de hacerse visible en Mascotas SJ.

Podrás verla publicada una vez que sea aprobada.`,"success",0,!0),x(!1)},onError:s=>{C(null),p(s)}}),e.jsx(_,{isOpen:A,onClose:()=>{M(!1),a(null)},item:w?{id:w.id,image:w.image,title:w.title,description:w.description}:{id:"",image:"",title:"",description:""},type:"donation"})]})};export{Z as default};
